# 📈 期货交易策略分析系统

一个基于机器学习的期货交易策略分析系统，具备可视化界面、数据导入、特征工程、模型训练和策略预测功能。

## 🚀 主要功能

### 1. 可视化操作界面
- 现代化的Web界面，基于Streamlit框架
- 直观的标签页设计，便于操作
- 实时数据可视化和图表展示

### 2. 数据导入功能
- 支持CSV格式的期货日线数据导入
- 灵活的列映射配置，适应不同的数据格式
- 导入成功/失败提示
- 数据完整性检查和预处理

### 3. 机器学习分析
- **无监督学习**: 数据聚类和模式识别
- **有监督学习**: 多种算法支持
  - 随机森林 (Random Forest)
  - 梯度提升 (Gradient Boosting)
  - 逻辑回归 (Logistic Regression)
  - XGBoost
  - LightGBM
  - CatBoost

### 4. 交易策略生成
- 实时策略预测
- 操作建议（做多/做空/持有）
- 止损止盈价格计算
- 成功率评估
- 盈亏比分析

## 📋 系统要求

- Python 3.8+
- 操作系统: Windows, macOS, Linux

## 🛠️ 安装步骤

1. **克隆或下载项目**
```bash
git clone <repository-url>
cd futures-strategy-analyzer
```

2. **安装依赖包**
```bash
# 方法1: 使用pip安装（推荐）
pip3 install --break-system-packages --user -r requirements.txt

# 方法2: 如果遇到权限问题，可以创建虚拟环境
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# 或 venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

3. **检查依赖包（可选）**
```bash
python3 check_dependencies.py
```

4. **生成示例数据（可选）**
```bash
python3 sample_data.py
```

5. **启动应用程序**
```bash
# 方法1: 使用启动脚本（推荐）
./start.sh

# 方法2: 手动启动
python3 -m streamlit run app.py
```

6. **在浏览器中打开**
```
http://localhost:8501
```

## 📊 数据格式要求

CSV文件应包含以下列（列名可以不同，通过映射配置）：

| 必需列 | 描述 | 示例 |
|--------|------|------|
| 日期 | 交易日期 | 2023-01-01 |
| 合约 | 期货合约代码 | IF2401 |
| 开盘价 | 开盘价格 | 3500.0 |
| 最高价 | 当日最高价 | 3520.0 |
| 最低价 | 当日最低价 | 3480.0 |
| 收盘价 | 收盘价格 | 3510.0 |
| 成交量 | 当日成交量 | 5000 |
| 持仓量 | 当日持仓量 | 100000 |

## 🔧 使用指南

### 第一步：数据导入
1. 在侧边栏选择CSV文件
2. 配置列映射（将CSV列名映射到系统标准列名）
3. 点击"导入数据"按钮
4. 查看导入成功提示

### 第二步：数据概览
1. 查看数据基本信息（行数、合约数、日期范围等）
2. 检查数据完整性
3. 查看价格走势图
4. 分析统计信息

### 第三步：特征工程
1. 点击"创建技术指标特征"生成技术指标
2. 设置预测参数（预测天数、盈利阈值、亏损阈值）
3. 点击"创建目标变量"生成训练标签
4. 查看特征相关性和目标变量分布

### 第四步：模型训练
1. 选择机器学习算法
2. 设置测试集比例
3. 点击"训练模型"开始训练
4. 查看模型性能指标

### 第五步：策略分析
1. 点击"生成交易策略"进行预测
2. 查看操作建议和关键指标
3. 分析风险收益比
4. 评估成功率

## 📈 技术指标说明

系统自动生成以下技术指标：

### 价格指标
- 价格变动率
- 高低价比率
- 开盘收盘价比率

### 移动平均线
- MA5, MA10, MA20, MA50
- 价格相对移动平均线位置

### 技术指标
- RSI (相对强弱指数)
- MACD (移动平均收敛发散)
- 布林带 (Bollinger Bands)
- ATR (平均真实波幅)
- ADX (平均方向指数)
- CCI (商品通道指数)

### 成交量指标
- 成交量移动平均
- 成交量比率

## 🤖 机器学习算法

### 随机森林 (Random Forest)
- 适合处理高维特征
- 不易过拟合
- 可解释性强

### 梯度提升 (Gradient Boosting)
- 预测精度高
- 适合结构化数据
- 需要调参

### 逻辑回归 (Logistic Regression)
- 模型简单
- 训练速度快
- 适合线性关系

### XGBoost
- 高性能梯度提升
- 内置正则化
- 支持并行计算

### LightGBM
- 训练速度快
- 内存占用低
- 适合大数据集

### CatBoost
- 处理类别特征
- 减少过拟合
- 预测精度高

## 📊 策略评估指标

### 成功率
- 基于模型预测概率
- 高成功率 (>70%): 建议执行
- 中等成功率 (50-70%): 谨慎考虑
- 低成功率 (<50%): 不建议执行

### 盈亏比
- 止盈价格与止损价格的比率
- 优秀 (>2.0): 建议执行
- 一般 (1.5-2.0): 谨慎考虑
- 偏低 (<1.5): 不建议交易

### 风险控制
- 基于ATR的止损止盈设置
- 动态风险调整
- 资金管理建议

## ⚠️ 重要提醒

1. **免责声明**: 本系统仅供学习和研究使用，不构成投资建议
2. **风险提示**: 期货交易具有高风险，投资需谨慎
3. **数据质量**: 确保输入数据的准确性和完整性
4. **模型验证**: 建议在实盘交易前进行充分的回测验证
5. **持续优化**: 定期更新模型和参数以适应市场变化

## 🔄 更新日志

### v1.0.0 (2024-01-01)
- 初始版本发布
- 基础功能实现
- 支持6种机器学习算法
- 完整的可视化界面

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进系统：

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 提交Issue
- 发送邮件
- 项目讨论区

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

---

**投资有风险，入市需谨慎！**
