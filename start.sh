#!/bin/bash

echo "============================================================"
echo "ğŸ“ˆ æœŸè´§äº¤æ˜“ç­–ç•¥åˆ†æç³»ç»Ÿ"
echo "============================================================"

# æ£€æŸ¥Pythonç‰ˆæœ¬
echo "ğŸ” æ£€æŸ¥Pythonç¯å¢ƒ..."
python3 --version

# æ£€æŸ¥ä¾èµ–åŒ…
echo "ğŸ” æ£€æŸ¥ä¾èµ–åŒ…..."
python3 check_dependencies.py

if [ $? -ne 0 ]; then
    echo "âŒ ä¾èµ–æ£€æŸ¥å¤±è´¥ï¼Œè¯·å…ˆå®‰è£…ç¼ºå¤±çš„åŒ…"
    exit 1
fi

# æ£€æŸ¥ç¤ºä¾‹æ•°æ®
if [ ! -f "sample_futures_data.csv" ]; then
    echo "ğŸ“Š ç”Ÿæˆç¤ºä¾‹æ•°æ®..."
    python3 sample_data.py
fi

# å¯åŠ¨åº”ç”¨ç¨‹åº
echo "ğŸš€ å¯åŠ¨åº”ç”¨ç¨‹åº..."
echo "ğŸ“± åº”ç”¨ç¨‹åºå°†åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€"
echo "ğŸŒ åœ°å€: http://localhost:8501"
echo ""
echo "æŒ‰ Ctrl+C åœæ­¢åº”ç”¨ç¨‹åº"
echo "============================================================"

python3 -m streamlit run app.py --server.port 8501 --server.address 0.0.0.0